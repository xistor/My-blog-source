---
title: "Linux/Unix系统编程手册-笔记23. 进程组、会话和作业控制"
date: 2020-10-31T17:40:00+08:00
tags: ["Linux"]
categories: ["Linux系统编程手册阅读"]
---

进程组是一组相关进程的集合，会话是一组相关进程组的集合。  
进程组和会话是用来支持shell作业控制的，创建进程组的目的是方便管理，可以向一个进程组内的进程同时发送信号。



## 进程组

进程组ID是创建进程组的进程的PID,新进程会继承其父进程所属的进程组ID。

可以使用`setpgid()`设置进程组id

```c
#include <unistd.h>

int setpgid(pid_t pid, pid_t pgid);
```
使用`setpgid()`的限制：
- 参数pid仅可以指定为调用进程或其子进程，否则报错ESRCH
- 在组间移动进程时，调用进程、由pid指定的进程、以及目标进程组必须在同属于一个会话，否则报错EPERM
- pid参数所指定的不能是会话首进程（可能原因：？会话首进程总是一个进程组首进程，使用`setsid()`在创建新会话的同时总是会创建一个新的进程组，若它被移动到其他一个进程组，那么它将不再是一个进程组组长，和规则冲突）
- 一个进程在其子进程已经执行了exec()后就无法修改该子进程的进程组ID了。违反了这条规则会导致EACESS。
